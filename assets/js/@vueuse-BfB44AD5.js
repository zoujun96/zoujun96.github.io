import{r as y,b as O,u as P,e as R,o as L,f as _,w as k,s as C,j as q,g as G,t as B}from"./@vue-ZzGtiElA.js";function x(e){return R()?(L(e),!0):!1}function g(e){return typeof e=="function"?e():P(e)}const w=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const D=Object.prototype.toString,F=e=>D.call(e)==="[object Object]",I=()=>{};function N(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const r=t;t=void 0,r&&await r},n}function V(e,t,n={}){const{immediate:r=!0}=n,u=y(!1);let o=null;function l(){o&&(clearTimeout(o),o=null)}function f(){u.value=!1,l()}function d(...c){l(),u.value=!0,o=setTimeout(()=>{u.value=!1,o=null,e(...c)},g(t))}return r&&(u.value=!0,w&&d()),x(f),{isPending:O(u),start:d,stop:f}}function $(e){var t;const n=g(e);return(t=n==null?void 0:n.$el)!=null?t:n}const z=w?window:void 0,T=w?window.navigator:void 0;function E(...e){let t,n,r,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,u]=e,t=z):[t,n,r,u]=e,!t)return I;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],l=()=>{o.forEach(a=>a()),o.length=0},f=(a,s,v,m)=>(a.addEventListener(s,v,m),()=>a.removeEventListener(s,v,m)),d=k(()=>[$(t),g(u)],([a,s])=>{if(l(),!a)return;const v=F(s)?{...s}:s;o.push(...n.flatMap(m=>r.map(b=>f(a,m,b,v))))},{immediate:!0,flush:"post"}),c=()=>{d(),l()};return x(c),c}function H(){const e=y(!1),t=G();return t&&q(()=>{e.value=!0},t),e}function j(e){const t=H();return _(()=>(t.value,!!e()))}function A(e,t={}){const{controls:n=!1,navigator:r=T}=t,u=j(()=>r&&"permissions"in r),o=C(),l=typeof e=="string"?{name:e}:e,f=C(),d=()=>{var a,s;f.value=(s=(a=o.value)==null?void 0:a.state)!=null?s:"prompt"};E(o,"change",d);const c=N(async()=>{if(u.value){if(!o.value)try{o.value=await r.permissions.query(l)}catch{o.value=void 0}finally{d()}if(n)return B(o.value)}});return c(),n?{state:f,isSupported:u,query:c}:f}function K(e={}){const{navigator:t=T,read:n=!1,source:r,copiedDuring:u=1500,legacy:o=!1}=e,l=j(()=>t&&"clipboard"in t),f=A("clipboard-read"),d=A("clipboard-write"),c=_(()=>l.value||o),a=y(""),s=y(!1),v=V(()=>s.value=!1,u);function m(){l.value&&S(f.value)?t.clipboard.readText().then(i=>{a.value=i}):a.value=W()}c.value&&n&&E(["copy","cut"],m);async function b(i=g(r)){c.value&&i!=null&&(l.value&&S(d.value)?await t.clipboard.writeText(i):M(i),a.value=i,s.value=!0,v.start())}function M(i){const p=document.createElement("textarea");p.value=i??"",p.style.position="absolute",p.style.opacity="0",document.body.appendChild(p),p.select(),document.execCommand("copy"),p.remove()}function W(){var i,p,h;return(h=(p=(i=document==null?void 0:document.getSelection)==null?void 0:i.call(document))==null?void 0:p.toString())!=null?h:""}function S(i){return i==="granted"||i==="prompt"}return{isSupported:c,text:a,copied:s,copy:b}}export{K as u};
